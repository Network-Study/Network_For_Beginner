# 1장 네트워크 시작하기
## 1.1 네트워크 구성도
### 네트워크
- 서비스를 받는 입장
- 서비스를 제공하는 입장

### 홈 네트워크
- 구성 : 모뎀\(네트워크 장비\) - 공유기 - 단말\(노트북/스마트폰/태블릿/데스크톱)
  - 무선 => 무선 랜카드, 공기
  - 유선 => 유선 랜 카드, 랜선

### 데이터 센터 네트워크
- 목표 : 안정적이고 빠른 대용량 서비스 제공
- 구성
  - 과거 : 3계층 디자인
    - Core, Aggregation, Access
    - North-South Traffic
    - 데이터 센터와 클라이언트, 네트워크 상의 데이터 센터 외부와 통신되는 트래픽
  - 현재 : 2계층 디자인
    - Spine, Leaf
    - Eas-West Traffic
    - 데이터 센서 내부에서 발생되는 트래픽으로, 서버와 서버간의 트래픽임

## 1.2 프로토콜
### 주로 사용하는 프로토콜
- 물리적 측면
  - 의미 : 데이터 전송 매체, 신호 규약, 회션 규격
  - 프로토콜 : 이더넷
- 논리적 측면
  - 의미 : 장치들끼리 통신하기 위한 프로토콜 규격
  - 프로토콜 : TCP/IP \(프로토콜 스택\)

### 프로토콜 특징
- 주로 2bit 기반
  - 효율적으로 통신하기 위함
- Application level에서는 문자 기반 많이 사용
  - ex)HTTP, SMTP 
  - 효율성은 bit 기반 프로토콜보다 떨어지지만 확장성이 좋음

## 1.3 OSI 7계층과 TCP/IP
### OSI 7계층
|계층|이름|데이터\(PDU:Protocol Data Unit\)|
|---|---|---|
|7|Application|Data|
|6|Presentation|Data|
|5|Session|Data|
|4|Transport|Segments|
|3|Network|Packets|
|2|Data Link|Frames|
|1|Physical|Bits|
- 5~7계층 : Application 계층 \(상위 계층\)
- 1~4계층 : Data Flow 계층 \(하위 계층\)

개발자는 하향식\(Top-Down\)으로 네트워크를 인식
네트워크 엔지니어는 상향식\(Bottom-Up\)으로 네트워크를 인식


## 1.4 OSI 7 
### 1계층 Physical
- 전기 신호를 전달
- 주소의 개념이 없음
- 주요 장비
  - 허브, 리피터 
    - 네트워크 통신 중재하는 네트워크 장비
  - 케이블, 커넥터
    - 케이블 본체를 구성하는 요소
  - 트랜시버
    - 랜카드와 케이블을 연결하는 장비
  - 탭
    - 네트워크 모니터링과 패킷 분석을 위해 전기신호를 다른 장비로 복제

### 2계층 Data Link
- 전기신호를 모아 인간이 알아볼 수 있는 데이터 형태로 처리
- 주소 정보를 정의하고 특정 주소로 통신이 되도록 함 \(출발지와 도착지 정보가 있음\)
- **MAC 주소를 사용**
- 데이터에 대한 에러 탐지
- Flow Control
  - 받는 사람이 현재 데이터를 받을 수 있는지 확인하는 작업
    1. 서버가 스위치에 데이터 전송
    2. 스위치에서 혼잡상황 발생, 스위치가 서버에 Pause 프레임 전송
    3. 서버는 Pause 프레임 수신 후 대기
- 주요 장비
  - 네트워크 인터페이스 카드
    - NIC, LAN 카드, 이더넷 카드, 네트워크 어댑터 .... 모두 같은 용어
    - 동작 방식
      1. 전기 신호를 데이터 형태로 만듦
      2. 목적지 MAC 주소와 출발지 MAC 주소 확인
      3. NIC의 MAC 주소 확인
      4. 목적지 MAC 주소와 NIC의 MAC 주소가 맞으면 데이터를 처리하고 다르면 폐기함
  - 스위치 
    - MAC 주소를 보고 통신해야 할 포트를 지정하는 기능이 있음
    - 주소 습득 과정에서 단말의 MAC 주소와, 연결된 포트 정보를 앎
    - 필터링, 포워딩 기능

### 3계층 Network
- 원격지 네트워크로 가기 위한 경로 지정
- 논리적 주소 \(IP\) 정의
  - IP 주소는 사용자가 환경에 맞게 변경할 수 있고, 네트워크 주소와 호스트 주소로 나뉨
    - ex)192.168.2.136   =>  Network: 192.168  Host: 2.136
- 주요 장비
  - 라우터
    - IP 주소를 사용해 최적의 경로를 찾고, 해당 경로로 패킷을 전송
- 주요 프로토콜 종류
  - ARP, IPv4, IPv6, NAT, IPSec, VRRP, Routing Protocol 

### 4계층 Transport
- 데이터가 정상적으로 잘 보내졌는지 확인하는 역할
  - 패킷이 유실되거나 순서가 바뀌어 온 것을 바로잡아줌
- Sequence Number, ACK Number, Port Number을 이용해 부하를 분산하거나 보안 정책을 수립해 패킷을 통과, 차단
- 주요 장비
  - 로드밸런서
  - 방화벽 
- 주요 프로토콜 종류
  - TCP, UDP, SCTP, DCCP, AH, AEP 

### 5계층 Session
- 연결을 성립하고, 유지하고, 끊는 역할
- 에러로 중단된 통신에 대한 에러 복구와 재전송

### 6계층 Presentation
- 통일된 구문 형식으로 변환시키는 기능
- MIME 인코딩, 암호화, 압축, 코드 변환과 같은 동작들

### 7계층 Application
- UI나 사용자 입/출력 부분을 정의하는 역할
- 주요 프로토콜 종류
  - FTP, SMTP, HTTP, TELNET

## 1.5 인캡슐레이션, 디캡슐레이션
![](https://chaelin1211.github.io/img/posts/inPost/capsulation-01.png)
- 인캡슐레이션
  - 보내는 과정
  - 데이터를 패킷으로 분할 
- 디캡슐레이션 : 받는 과정
  - 받는 과정
  - 패킷을 다시 데이터 형태로 결합
- 패킷의 헤더 정보는 같은 계층끼리 전달됨
- 헤더
  - 반드시 포함돼야 하는 헤더
    1. 현재 계층에서 정의하는 정보
        - 패킷 순서 및 빠진 패킷 점검하는 역할
          - 4계층: seq, ack
          - 3계층: IP Addr \(출발지,도착지\)
          - 2계층: MAC Addr \(출발지, 도착지\) 
    2. 상위 프로토콜 지시자
        - 어떤 상위 프로토콜로 올려야 할지 결정하기 위해 필요함
        - ex port num) TCP 80: HTTP, TCP 22: SSH
        - ex protocol num) 1: ICMP, 6: TCP
        - ex Ether Type) 0x0800: IPv4

